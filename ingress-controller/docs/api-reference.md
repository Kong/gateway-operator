---
title: Custom Resource (CRD) API Reference

description: |
  See the generated CRD structure containing all possible resource fields and descriptions for each property.

content_type: reference
layout: reference
tags:
  - crd
search_aliases: 
  - kic CRD
products:
  - kic
breadcrumbs:
  - /kubernetes-ingress-controller/
works_on:
  - on-prem
  - konnect
related_resources:
  - text: Gateway API
    url: /kubernetes-ingress-controller/gateway-api/
---

<!-- vale off -->

<!-- This document is generated by KIC's 'generate.docs' make target, DO NOT EDIT -->

## Packages
- [configuration.konghq.com/v1](#configurationkonghqcomv1)
- [configuration.konghq.com/v1alpha1](#configurationkonghqcomv1alpha1)
- [configuration.konghq.com/v1beta1](#configurationkonghqcomv1beta1)


## configuration.konghq.com/v1

Package v1 contains API Schema definitions for the konghq.com v1 API group.

- [KongClusterPlugin](#kongclusterplugin)
- [KongConsumer](#kongconsumer)
- [KongPlugin](#kongplugin)
### KongClusterPlugin


KongClusterPlugin is the Schema for the kongclusterplugins API.

{% include md/kic/crd-ref/kong_cluster_plugin_description.md kong_version=page.kong_version %}

| Field | Description |
| --- | --- |
| `apiVersion` _string_ | `configuration.konghq.com/v1`
| `kind` _string_ | `KongClusterPlugin`
| `metadata` _[ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#objectmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |
| `consumerRef` _string_ | ConsumerRef is a reference to a particular consumer. |
| `disabled` _boolean_ | Disabled set if the plugin is disabled or not. |
| `config` _[JSON](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#json-v1-apiextensions-k8s-io)_ | Config contains the plugin configuration. It's a list of keys and values required to configure the plugin. Please read the documentation of the plugin being configured to set values in here. For any plugin in Kong, anything that goes in the `config` JSON key in the Admin API request, goes into this property. Only one of `config` or `configFrom` may be used in a KongClusterPlugin, not both at once. |
| `configFrom` _[NamespacedConfigSource](#namespacedconfigsource)_ | ConfigFrom references a secret containing the plugin configuration. This should be used when the plugin configuration contains sensitive information, such as AWS credentials in the Lambda plugin or the client secret in the OIDC plugin. Only one of `config` or `configFrom` may be used in a KongClusterPlugin, not both at once. |
| `configPatches` _[NamespacedConfigPatch](#namespacedconfigpatch) array_ | ConfigPatches represents JSON patches to the configuration of the plugin. Each item means a JSON patch to add something in the configuration, where path is specified in `path` and value is in `valueFrom` referencing a key in a secret. When Config is specified, patches will be applied to the configuration in Config. Otherwise, patches will be applied to an empty object. |
| `plugin` _string_ | PluginName is the name of the plugin to which to apply the config. |
| `run_on` _string_ | RunOn configures the plugin to run on the first or the second or both nodes in case of a service mesh deployment. |
| `protocols` _[KongProtocol](#kongprotocol) array_ | Protocols configures plugin to run on requests received on specific protocols. |
| `ordering` _[PluginOrdering](#pluginordering)_ | Ordering overrides the normal plugin execution order. It's only available on Kong Enterprise. `<phase>` is a request processing phase (for example, `access` or `body_filter`) and `<plugin>` is the name of the plugin that will run before or after the KongPlugin. For example, a KongPlugin with `plugin: rate-limiting` and `before.access: ["key-auth"]` will create a rate limiting plugin that limits requests _before_ they are authenticated. |
| `instance_name` _string_ | InstanceName is an optional custom name to identify an instance of the plugin. This is useful when running the same plugin in multiple contexts, for example, on multiple services. |



### KongConsumer


KongConsumer is the Schema for the kongconsumers API.

{% include md/kic/crd-ref/kong_consumer_description.md kong_version=page.kong_version %}

| Field | Description |
| --- | --- |
| `apiVersion` _string_ | `configuration.konghq.com/v1`
| `kind` _string_ | `KongConsumer`
| `metadata` _[ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#objectmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |
| `username` _string_ | Username is a Kong cluster-unique username of the consumer. |
| `custom_id` _string_ | CustomID is a Kong cluster-unique existing ID for the consumer - useful for mapping Kong with users in your existing database. |
| `credentials` _string array_ | Credentials are references to secrets containing a credential to be provisioned in Kong. |
| `consumerGroups` _string array_ | ConsumerGroups are references to consumer groups (that consumer wants to be part of) provisioned in Kong. |
| `spec` _[KongConsumerSpec](#kongconsumerspec)_ |  |



### KongPlugin


KongPlugin is the Schema for the kongplugins API.

{% include md/kic/crd-ref/kong_plugin_description.md kong_version=page.kong_version %}

| Field | Description |
| --- | --- |
| `apiVersion` _string_ | `configuration.konghq.com/v1`
| `kind` _string_ | `KongPlugin`
| `metadata` _[ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#objectmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |
| `consumerRef` _string_ | ConsumerRef is a reference to a particular consumer. |
| `disabled` _boolean_ | Disabled set if the plugin is disabled or not. |
| `config` _[JSON](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#json-v1-apiextensions-k8s-io)_ | Config contains the plugin configuration. It's a list of keys and values required to configure the plugin. Please read the documentation of the plugin being configured to set values in here. For any plugin in Kong, anything that goes in the `config` JSON key in the Admin API request, goes into this property. Only one of `config` or `configFrom` may be used in a KongPlugin, not both at once. |
| `configFrom` _[ConfigSource](#configsource)_ | ConfigFrom references a secret containing the plugin configuration. This should be used when the plugin configuration contains sensitive information, such as AWS credentials in the Lambda plugin or the client secret in the OIDC plugin. Only one of `config` or `configFrom` may be used in a KongPlugin, not both at once. |
| `configPatches` _[ConfigPatch](#configpatch) array_ | ConfigPatches represents JSON patches to the configuration of the plugin. Each item means a JSON patch to add something in the configuration, where path is specified in `path` and value is in `valueFrom` referencing a key in a secret. When Config is specified, patches will be applied to the configuration in Config. Otherwise, patches will be applied to an empty object. |
| `plugin` _string_ | PluginName is the name of the plugin to which to apply the config. |
| `run_on` _string_ | RunOn configures the plugin to run on the first or the second or both nodes in case of a service mesh deployment. |
| `protocols` _[KongProtocol](#kongprotocol) array_ | Protocols configures plugin to run on requests received on specific protocols. |
| `ordering` _[PluginOrdering](#pluginordering)_ | Ordering overrides the normal plugin execution order. It's only available on Kong Enterprise. `<phase>` is a request processing phase (for example, `access` or `body_filter`) and `<plugin>` is the name of the plugin that will run before or after the KongPlugin. For example, a KongPlugin with `plugin: rate-limiting` and `before.access: ["key-auth"]` will create a rate limiting plugin that limits requests _before_ they are authenticated. |
| `instance_name` _string_ | InstanceName is an optional custom name to identify an instance of the plugin. This is useful when running the same plugin in multiple contexts, for example, on multiple services. |



### Types

In this section you will find types that the CRDs rely on.




#### ConfigPatch


ConfigPatch is a JSON patch (RFC6902) to add values from Secret to the generated configuration.
It is an equivalent of the following patch:
`{"op": "add", "path": {.Path}, "value": {.ComputedValueFrom}}`.



| Field | Description |
| --- | --- |
| `path` _string_ | Path is the JSON-Pointer value (RFC6901) that references a location within the target configuration. |
| `valueFrom` _[ConfigSource](#configsource)_ | ValueFrom is the reference to a key of a secret where the patched value comes from. |


_Appears in:_
- [KongPlugin](#kongplugin)

#### ConfigSource


ConfigSource is a wrapper around SecretValueFromSource.



| Field | Description |
| --- | --- |
| `secretKeyRef` _[SecretValueFromSource](#secretvaluefromsource)_ | Specifies a name and a key of a secret to refer to. The namespace is implicitly set to the one of referring object. |


_Appears in:_
- [ConfigPatch](#configpatch)
- [KongPlugin](#kongplugin)



#### KongConsumerSpec


KongConsumerSpec defines the specification of the KongConsumer.



| Field | Description |
| --- | --- |
| `controlPlaneRef` _[ControlPlaneRef](#controlplaneref)_ | ControlPlaneRef is a reference to a ControlPlane this Consumer is associated with. |
| `tags` _[Tags](#tags)_ | Tags is an optional set of tags applied to the consumer. |


_Appears in:_
- [KongConsumer](#kongconsumer)





#### KongProtocol
_Underlying type:_ `string`

KongProtocol is a valid Kong protocol.
This alias is necessary to deal with https://github.com/kubernetes-sigs/controller-tools/issues/342





_Appears in:_
- [KongClusterPlugin](#kongclusterplugin)
- [KongPlugin](#kongplugin)

#### NamespacedConfigPatch


NamespacedConfigPatch is a JSON patch to add values from secrets to KongClusterPlugin
to the generated configuration of plugin in Kong.



| Field | Description |
| --- | --- |
| `path` _string_ | Path is the JSON path to add the patch. |
| `valueFrom` _[NamespacedConfigSource](#namespacedconfigsource)_ | ValueFrom is the reference to a key of a secret where the patched value comes from. |


_Appears in:_
- [KongClusterPlugin](#kongclusterplugin)

#### NamespacedConfigSource


NamespacedConfigSource is a wrapper around NamespacedSecretValueFromSource.



| Field | Description |
| --- | --- |
| `secretKeyRef` _[NamespacedSecretValueFromSource](#namespacedsecretvaluefromsource)_ | Specifies a name, a namespace, and a key of a secret to refer to. |


_Appears in:_
- [KongClusterPlugin](#kongclusterplugin)
- [NamespacedConfigPatch](#namespacedconfigpatch)

#### NamespacedSecretValueFromSource


NamespacedSecretValueFromSource represents the source of a secret value specifying the secret namespace.



| Field | Description |
| --- | --- |
| `namespace` _string_ | The namespace containing the secret. |
| `name` _string_ | The secret containing the key. |
| `key` _string_ | The key containing the value. |


_Appears in:_
- [NamespacedConfigSource](#namespacedconfigsource)

#### SecretValueFromSource


SecretValueFromSource represents the source of a secret value.



| Field | Description |
| --- | --- |
| `name` _string_ | The secret containing the key. |
| `key` _string_ | The key containing the value. |


_Appears in:_
- [ConfigSource](#configsource)


## configuration.konghq.com/v1alpha1

Package v1alpha1 contains API Schema definitions for the configuration.konghq.com v1alpha1 API group.

- [IngressClassParameters](#ingressclassparameters)
- [KongCustomEntity](#kongcustomentity)
- [KongLicense](#konglicense)
- [KongVault](#kongvault)
### IngressClassParameters


IngressClassParameters is the Schema for the IngressClassParameters API.

{% include md/kic/crd-ref/ingress_class_parameters_description.md kong_version=page.kong_version %}

| Field | Description |
| --- | --- |
| `apiVersion` _string_ | `configuration.konghq.com/v1alpha1`
| `kind` _string_ | `IngressClassParameters`
| `metadata` _[ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#objectmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |
| `spec` _[IngressClassParametersSpec](#ingressclassparametersspec)_ | Spec is the IngressClassParameters specification. |










### KongCustomEntity


KongCustomEntity defines a "custom" Kong entity that KIC cannot support the entity type directly.

{% include md/kic/crd-ref/kong_custom_entity_description.md kong_version=page.kong_version %}

| Field | Description |
| --- | --- |
| `apiVersion` _string_ | `configuration.konghq.com/v1alpha1`
| `kind` _string_ | `KongCustomEntity`
| `metadata` _[ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#objectmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |
| `spec` _[KongCustomEntitySpec](#kongcustomentityspec)_ |  |






### KongLicense


KongLicense stores a Kong enterprise license to apply to managed Kong gateway instances.

{% include md/kic/crd-ref/kong_license_description.md kong_version=page.kong_version %}

| Field | Description |
| --- | --- |
| `apiVersion` _string_ | `configuration.konghq.com/v1alpha1`
| `kind` _string_ | `KongLicense`
| `metadata` _[ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#objectmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |
| `rawLicenseString` _string_ | RawLicenseString is a string with the raw content of the license. |
| `enabled` _boolean_ | Enabled is set to true to let controllers (like KIC or KGO) to reconcile it. Default value is true to apply the license by default. |









### KongVault


KongVault is the schema for kongvaults API which defines a custom Kong vault.
A Kong vault is a storage to store sensitive data, where the values can be referenced in configuration of plugins.
See: https://docs.konghq.com/gateway/latest/kong-enterprise/secrets-management/

{% include md/kic/crd-ref/kong_vault_description.md kong_version=page.kong_version %}

| Field | Description |
| --- | --- |
| `apiVersion` _string_ | `configuration.konghq.com/v1alpha1`
| `kind` _string_ | `KongVault`
| `metadata` _[ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#objectmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |
| `spec` _[KongVaultSpec](#kongvaultspec)_ |  |



### Types

In this section you will find types that the CRDs rely on.
#### ControllerReference


ControllerReference is a reference to a controller that reconciles the KongLicense.



| Field | Description |
| --- | --- |
| `group` _[Group](#group)_ | Group is the group of referent. It should be empty if the referent is in "core" group (like pod). |
| `kind` _[Kind](#kind)_ | Kind is the kind of the referent. By default the nil kind means kind Pod. |
| `namespace` _[Namespace](#namespace)_ | Namespace is the namespace of the referent. It should be empty if the referent is cluster scoped. |
| `name` _[ObjectName](#objectname)_ | Name is the name of the referent. |


_Appears in:_
- [KongLicenseControllerStatus](#konglicensecontrollerstatus)

#### IngressClassParametersSpec


IngressClassParametersSpec defines the desired state of IngressClassParameters.



| Field | Description |
| --- | --- |
| `serviceUpstream` _boolean_ | Offload load-balancing to kube-proxy or sidecar. |
| `enableLegacyRegexDetection` _boolean_ | EnableLegacyRegexDetection automatically detects if ImplementationSpecific Ingress paths are regular expression paths using the legacy 2.x heuristic. The controller adds the "~" prefix to those paths if the Kong version is 3.0 or higher. |


_Appears in:_
- [IngressClassParameters](#ingressclassparameters)

#### KongCustomEntitySpec


KongCustomEntitySpec defines the specification of the KongCustomEntity.



| Field | Description |
| --- | --- |
| `type` _string_ | EntityType is the type of the Kong entity. The type is used in generating declarative configuration. |
| `fields` _[JSON](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#json-v1-apiextensions-k8s-io)_ | Fields defines the fields of the Kong entity itself. |
| `controllerName` _string_ | ControllerName specifies the controller that should reconcile it, like ingress class. |
| `parentRef` _[ObjectReference](#objectreference)_ | ParentRef references the kubernetes resource it attached to when its scope is "attached". Currently only KongPlugin/KongClusterPlugin allowed. This will make the custom entity to be attached to the entity(service/route/consumer) where the plugin is attached. |


_Appears in:_
- [KongCustomEntity](#kongcustomentity)



#### KongVaultSpec


KongVaultSpec defines specification of a custom Kong vault.



| Field | Description |
| --- | --- |
| `backend` _string_ | Backend is the type of the backend storing the secrets in the vault. The supported backends of Kong is listed here: https://docs.konghq.com/gateway/latest/kong-enterprise/secrets-management/backends/ |
| `prefix` _string_ | Prefix is the prefix of vault URI for referencing values in the vault. It is immutable after created. |
| `description` _string_ | Description is the additional information about the vault. |
| `config` _[JSON](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#json-v1-apiextensions-k8s-io)_ | Config is the configuration of the vault. Varies for different backends. |
| `tags` _[Tags](#tags)_ | Tags are the tags associated to the vault for grouping and filtering. |
| `controlPlaneRef` _[ControlPlaneRef](#controlplaneref)_ | ControlPlaneRef is a reference to a Konnect ControlPlane this KongVault is associated with. |


_Appears in:_
- [KongVault](#kongvault)



#### ObjectName
_Underlying type:_ `string`

ObjectName refers to the name of a Kubernetes object.
Object names can have a variety of forms, including RFC1123 subdomains,
RFC 1123 labels, or RFC 1035 labels.





_Appears in:_
- [ControllerReference](#controllerreference)

#### ObjectReference


ObjectReference defines reference of a kubernetes object.



| Field | Description |
| --- | --- |
| `group` _string_ | Group defines the API group of the referred object. |
| `kind` _string_ | Kind defines the kind of the referred object. |
| `namespace` _string_ | Empty namespace means the same namespace of the owning object. |
| `name` _string_ | Name defines the name of the referred object. |


_Appears in:_
- [KongCustomEntitySpec](#kongcustomentityspec)


## configuration.konghq.com/v1beta1

Package v1beta1 contains API Schema definitions for the configuration.konghq.com v1beta1 API group.

- [KongConsumerGroup](#kongconsumergroup)
- [KongUpstreamPolicy](#kongupstreampolicy)
### KongConsumerGroup


KongConsumerGroup is the Schema for the kongconsumergroups API.

{% include md/kic/crd-ref/kong_consumer_group_description.md kong_version=page.kong_version %}

| Field | Description |
| --- | --- |
| `apiVersion` _string_ | `configuration.konghq.com/v1beta1`
| `kind` _string_ | `KongConsumerGroup`
| `metadata` _[ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#objectmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |
| `spec` _[KongConsumerGroupSpec](#kongconsumergroupspec)_ |  |



### KongUpstreamPolicy


KongUpstreamPolicy allows configuring algorithm that should be used for load balancing traffic between Kong
Upstream's Targets. It also allows configuring health checks for Kong Upstream's Targets.<br /><br />Its configuration is similar to Kong Upstream object (https://docs.konghq.com/gateway/latest/admin-api/#upstream-object),
and it is applied to Kong Upstream objects created by the controller.<br /><br />It can be attached to Services. To attach it to a Service, it has to be annotated with
`konghq.com/upstream-policy: <name>`, where `<name>` is the name of the KongUpstreamPolicy
object in the same namespace as the Service.<br /><br />When attached to a Service, it will affect all Kong Upstreams created for the Service.<br /><br />When attached to a Service used in a Gateway API *Route rule with multiple BackendRefs, all of its Services MUST
be configured with the same KongUpstreamPolicy. Otherwise, the controller will *ignore* the KongUpstreamPolicy.<br /><br />Note: KongUpstreamPolicy doesn't implement Gateway API's GEP-713 strictly.
In particular, it doesn't use the TargetRef for attaching to Services and Gateway API *Routes - annotations are
used instead. This is to allow reusing the same KongUpstreamPolicy for multiple Services and Gateway API *Routes.

{% include md/kic/crd-ref/kong_upstream_policy_description.md kong_version=page.kong_version %}

| Field | Description |
| --- | --- |
| `apiVersion` _string_ | `configuration.konghq.com/v1beta1`
| `kind` _string_ | `KongUpstreamPolicy`
| `metadata` _[ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#objectmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |
| `spec` _[KongUpstreamPolicySpec](#kongupstreampolicyspec)_ | Spec contains the configuration of the Kong upstream. |



### Types

In this section you will find types that the CRDs rely on.
#### HTTPStatus
_Underlying type:_ `integer`

HTTPStatus is an HTTP status code.





_Appears in:_
- [KongUpstreamHealthcheckHealthy](#kongupstreamhealthcheckhealthy)
- [KongUpstreamHealthcheckUnhealthy](#kongupstreamhealthcheckunhealthy)

#### HashInput
_Underlying type:_ `string`

HashInput is the input for consistent-hashing load balancing algorithm.
Use "none" to disable hashing, it is required for sticky sessions.





_Appears in:_
- [KongUpstreamHash](#kongupstreamhash)

#### KongConsumerGroupSpec


KongConsumerGroupSpec defines the desired state of KongConsumerGroup.



| Field | Description |
| --- | --- |
| `name` _string_ | Name is the name of the ConsumerGroup in Kong. |
| `controlPlaneRef` _[ControlPlaneRef](#controlplaneref)_ | ControlPlaneRef is a reference to a ControlPlane this ConsumerGroup is associated with. |
| `tags` _[Tags](#tags)_ | Tags is an optional set of tags applied to the ConsumerGroup. |


_Appears in:_
- [KongConsumerGroup](#kongconsumergroup)



#### KongUpstreamActiveHealthcheck


KongUpstreamActiveHealthcheck configures active health check probing.



| Field | Description |
| --- | --- |
| `type` _string_ | Type determines whether to perform active health checks using HTTP or HTTPS, or just attempt a TCP connection. Accepted values are "http", "https", "tcp", "grpc", "grpcs". |
| `concurrency` _integer_ | Concurrency is the number of targets to check concurrently. |
| `healthy` _[KongUpstreamHealthcheckHealthy](#kongupstreamhealthcheckhealthy)_ | Healthy configures thresholds and HTTP status codes to mark targets healthy for an upstream. |
| `unhealthy` _[KongUpstreamHealthcheckUnhealthy](#kongupstreamhealthcheckunhealthy)_ | Unhealthy configures thresholds and HTTP status codes to mark targets unhealthy for an upstream. |
| `httpPath` _string_ | HTTPPath is the path to use in GET HTTP request to run as a probe. |
| `httpsSni` _string_ | HTTPSSNI is the SNI to use in GET HTTPS request to run as a probe. |
| `httpsVerifyCertificate` _boolean_ | HTTPSVerifyCertificate is a boolean value that indicates if the certificate should be verified. |
| `timeout` _integer_ | Timeout is the probe timeout in seconds. |
| `headers` _object (keys:string, values:string array)_ | Headers is a list of HTTP headers to add to the probe request. |


_Appears in:_
- [KongUpstreamHealthcheck](#kongupstreamhealthcheck)

#### KongUpstreamHash


KongUpstreamHash defines how to calculate hash for consistent-hashing load balancing algorithm.
Only one of the fields must be set.



| Field | Description |
| --- | --- |
| `input` _[HashInput](#hashinput)_ | Input allows using one of the predefined inputs (ip, consumer, path, none). Set this to `none` if you want to use sticky sessions. For other parameterized inputs, use one of the fields below. |
| `header` _string_ | Header is the name of the header to use as hash input. |
| `cookie` _string_ | Cookie is the name of the cookie to use as hash input. |
| `cookiePath` _string_ | CookiePath is cookie path to set in the response headers. |
| `queryArg` _string_ | QueryArg is the name of the query argument to use as hash input. |
| `uriCapture` _string_ | URICapture is the name of the URI capture group to use as hash input. |


_Appears in:_
- [KongUpstreamPolicySpec](#kongupstreampolicyspec)

#### KongUpstreamHealthcheck


KongUpstreamHealthcheck represents a health-check config of an Upstream in Kong.



| Field | Description |
| --- | --- |
| `active` _[KongUpstreamActiveHealthcheck](#kongupstreamactivehealthcheck)_ | Active configures active health check probing. |
| `passive` _[KongUpstreamPassiveHealthcheck](#kongupstreampassivehealthcheck)_ | Passive configures passive health check probing. |
| `threshold` _integer_ | Threshold is the minimum percentage of the upstream’s targets’ weight that must be available for the whole upstream to be considered healthy. |


_Appears in:_
- [KongUpstreamPolicySpec](#kongupstreampolicyspec)

#### KongUpstreamHealthcheckHealthy


KongUpstreamHealthcheckHealthy configures thresholds and HTTP status codes to mark targets healthy for an upstream.



| Field | Description |
| --- | --- |
| `httpStatuses` _[HTTPStatus](#httpstatus) array_ | HTTPStatuses is a list of HTTP status codes that Kong considers a success. |
| `interval` _integer_ | Interval is the interval between active health checks for an upstream in seconds when in a healthy state. |
| `successes` _integer_ | Successes is the number of successes to consider a target healthy. |


_Appears in:_
- [KongUpstreamActiveHealthcheck](#kongupstreamactivehealthcheck)
- [KongUpstreamPassiveHealthcheck](#kongupstreampassivehealthcheck)

#### KongUpstreamHealthcheckUnhealthy


KongUpstreamHealthcheckUnhealthy configures thresholds and HTTP status codes to mark targets unhealthy.



| Field | Description |
| --- | --- |
| `httpFailures` _integer_ | HTTPFailures is the number of failures to consider a target unhealthy. |
| `httpStatuses` _[HTTPStatus](#httpstatus) array_ | HTTPStatuses is a list of HTTP status codes that Kong considers a failure. |
| `tcpFailures` _integer_ | TCPFailures is the number of TCP failures in a row to consider a target unhealthy. |
| `timeouts` _integer_ | Timeouts is the number of timeouts in a row to consider a target unhealthy. |
| `interval` _integer_ | Interval is the interval between active health checks for an upstream in seconds when in an unhealthy state. |


_Appears in:_
- [KongUpstreamActiveHealthcheck](#kongupstreamactivehealthcheck)
- [KongUpstreamPassiveHealthcheck](#kongupstreampassivehealthcheck)

#### KongUpstreamPassiveHealthcheck


KongUpstreamPassiveHealthcheck configures passive checks around
passive health checks.



| Field | Description |
| --- | --- |
| `type` _string_ | Type determines whether to perform passive health checks interpreting HTTP/HTTPS statuses, or just check for TCP connection success. Accepted values are "http", "https", "tcp", "grpc", "grpcs". |
| `healthy` _[KongUpstreamHealthcheckHealthy](#kongupstreamhealthcheckhealthy)_ | Healthy configures thresholds and HTTP status codes to mark targets healthy for an upstream. |
| `unhealthy` _[KongUpstreamHealthcheckUnhealthy](#kongupstreamhealthcheckunhealthy)_ | Unhealthy configures thresholds and HTTP status codes to mark targets unhealthy. |


_Appears in:_
- [KongUpstreamHealthcheck](#kongupstreamhealthcheck)

#### KongUpstreamPolicySpec


KongUpstreamPolicySpec contains the specification for KongUpstreamPolicy.



| Field | Description |
| --- | --- |
| `algorithm` _string_ | Algorithm is the load balancing algorithm to use. Accepted values are: "round-robin", "consistent-hashing", "least-connections", "latency", "sticky-sessions" |
| `slots` _integer_ | Slots is the number of slots in the load balancer algorithm. If not set, the default value in Kong for the algorithm is used. |
| `hashOn` _[KongUpstreamHash](#kongupstreamhash)_ | HashOn defines how to calculate hash for consistent-hashing or sticky-sessions load balancing algorithm. Algorithm must be set to "consistent-hashing" or "sticky-sessions" for this field to have effect. |
| `hashOnFallback` _[KongUpstreamHash](#kongupstreamhash)_ | HashOnFallback defines how to calculate hash for consistent-hashing load balancing algorithm if the primary hash function fails. Algorithm must be set to "consistent-hashing" for this field to have effect. |
| `healthchecks` _[KongUpstreamHealthcheck](#kongupstreamhealthcheck)_ | Healthchecks defines the health check configurations in Kong. |
| `stickySessions` _[KongUpstreamStickySessions](#kongupstreamstickysessions)_ | StickySessions defines the sticky session configuration for the upstream. When enabled, clients will be routed to the same backend target based on a cookie. This requires Kong Enterprise Gateway and setting `hash_on` to `none`. |


_Appears in:_
- [KongUpstreamPolicy](#kongupstreampolicy)

#### KongUpstreamStickySessions


KongUpstreamStickySessions defines the sticky session configuration for Kong upstream.
Sticky sessions ensure that requests from the same client are routed to the same backend target.
This is achieved using cookies and requires Kong Enterprise Gateway.



| Field | Description |
| --- | --- |
| `cookie` _string_ | Cookie is the name of the cookie to use for sticky sessions. Kong will generate this cookie if it doesn't exist in the request. |
| `cookiePath` _string_ | CookiePath is the path to set in the cookie. |


_Appears in:_
- [KongUpstreamPolicySpec](#kongupstreampolicyspec)

<!-- vale on -->
